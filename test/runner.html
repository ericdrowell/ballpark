<html>  
  <head>  
    <meta charset="utf-8">
    <title>ballpark Mocha Tests</title>
    <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
  </head>  
  <body>  
    <h1>ballpark Tests</h1>
    <div id="mocha"></div>

    <script src="../node_modules/mocha/mocha.js"></script>
    <script src="../node_modules/chai/chai.js"></script>
    <script src="../src/ballpark.js"></script>
    <script>
        var assert = chai.assert;

        mocha.setup('tdd');

        test('number size', function(){
          assert.equal(ballpark(12).size, 8);
        });

        test('string size', function(){
          assert.equal(ballpark('foobar').size, 6 * 2);
        });

        test('boolean size', function(){
          assert.equal(ballpark(true).size, 4);
        });

        test('null size', function(){
          assert.equal(ballpark(null).size, 4);
        });

        test('object size', function(){
          var obj = {
                foo: 5,
                bar: 'abcdefghijk'
              },
              expectedSize = 0;

          // foo key
          expectedSize += 2*3;
          // bar key
          expectedSize += 2*3;
          // 5 number
          expectedSize += 8;
          // abcdefghijk string
          expectedSize += 2*11;

          assert.equal(ballpark(obj).size, expectedSize);

          assert.equal(obj.__ballpark, true);
        });

        test('array size', function(){
          var arr = [1, 2, 3];

          assert.equal(ballpark(arr).size, 8 * 3);

          assert.equal(arr.__ballpark, true);
        });

        test('nested object size', function(){
          var obj = {
                a: 1,
                b: {
                  c: 2,
                  d: 'abcdefghijk'
                }
              },
              expectedSize = 0;

          // a key
          expectedSize += 2*1;
          // b key
          expectedSize += 2*1;
          // 1 number
          expectedSize += 8;
          // c key
          expectedSize += 2*1;
          // d key
          expectedSize += 2*1;
          // 2 number
          expectedSize += 8;
          // abcdefghijk string
          expectedSize += 2*11;

          assert.equal(ballpark(obj).size, expectedSize);

          assert.equal(obj.__ballpark, true);
        });

        mocha.run();
    </script>
  </body>  
</html> 